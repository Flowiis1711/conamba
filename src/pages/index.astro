---
import Nav from "@components/Nav.astro";
import Parallax from "@components/Parallax.astro";
import Project from "@components/Project.astro";
import Section from "@components/Section.astro";
import Service from "@components/Service.astro";
import Layout from "@layouts/Layout.astro";
import { getCollection } from "astro:content";

const SERVICES_FIRST_COL = [
  {
    title: "Certificados",
    items: [
      "Informe de evaluación del edificio (ITE/IEE)",
      "Certificados energéticos",
      "Cédulas de habitabilidad",
    ],
    icon: "fa-solid fa-certificate",
  },
];

const SERVICES_SECOND_COL = [
  {
    title: "Informes",
    items: [
      "Informe para la solicitud de los Fondos Next Generation Programa 3 PRTR.",
      "Ayudas para actuaciones de rehabilitación a nivel de edificio.",
      "Mediciones y presupuestos",
      "Levantamientos sobre el estado actual",
    ],
    icon: "fa-solid fa-file",
  },
];

const projects = await getCollection("projects");
---

<Layout
  title="Conamba - Aparejadores"
  description="Conamba - Consultores Ambientales de Baleares - Aparejadores"
>
  <header
    class="flex flex-col items-center h-screen w-full bg-[url('/header-img.jpeg')] bg-no-repeat bg-right bg-cover bg-fixed"
  >
    <Nav />
    <h1 class="mt-12 text-7xl text-white uppercase">Conamba</h1>
    <h2 class="text-4xl text-white uppercase">Aparejadores</h2>
  </header>
  <Section id="services" title="Nuestros servicios">
    <div class="flex flex-wrap gap-[5rem] items-center">
      <div class="flex flex-col gap-[3rem] flex-1">
        {
          SERVICES_FIRST_COL.map((service) => {
            return (
              <Service
                title={service.title}
                items={service.items}
                icon={service.icon}
              />
            );
          })
        }
      </div>
      <div class="flex flex-col gap-[3rem] flex-1">
        {
          SERVICES_SECOND_COL.map((service) => {
            return (
              <Service
                title={service.title}
                items={service.items}
                icon={service.icon}
              />
            );
          })
        }
      </div>
    </div>
  </Section>
  <Parallax
    imageBackground="bg-[url(/projects/5-star-hotel-rehab/IMG_5020.JPG)]"
  />
  <Section id="projects" title="Nuestros últimos proyectos">
    <div class="w-full flex flex-wrap justify-between gap-8">
      {
        projects.map((project, index) => {
          const { slug, data } = project;
          const { title, mainImage } = data;
          if (index < 3) {
            return (
              <Project
                name={title}
                img={mainImage.url}
                altImg={mainImage.description}
                slug={slug}
              />
            );
          }
        })
      }
    </div>
    <button class="max-w-[200px] bg-transparent text-white font-bold py-2 px-5 border-2 border-customGreen w-[90%] mx-auto text-[1.3em] cursor-pointer hover:bg-customGreen hover:text-black">VER MÁS</button>
  </Section>
  <Parallax
    imageBackground="bg-[url(/projects/5-star-hotel-rehab/IMG_5126.JPG)]"
  />
  <footer class="bg-customGreen w-full p-6 text-center mt-auto font-semibold">
    CONAMBA - APAREJADORES
  </footer>
</Layout>
